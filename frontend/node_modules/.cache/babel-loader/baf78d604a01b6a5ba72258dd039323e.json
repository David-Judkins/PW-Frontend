{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lilju/Desktop/Personal-Website/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lilju/Desktop/Personal-Website/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lilju/Desktop/Personal-Website/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Record=function Record(props){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:props.record.firstName}),/*#__PURE__*/_jsx(\"td\",{children:props.record.lastName}),/*#__PURE__*/_jsx(\"td\",{children:props.record.relationship}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-link\",to:\"/edit-profile/\".concat(props.record._id),children:\"Edit\"}),\" |\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link\",onClick:function onClick(){props.deleteRecord(props.record._id);},children:\"Delete\"})]})]});};export default function RecordList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),records=_useState2[0],setRecords=_useState2[1];// This method fetches the records from the database.\nuseEffect(function(){function getRecords(){return _getRecords.apply(this,arguments);}function _getRecords(){_getRecords=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,message,records;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/records-panel\");case 2:response=_context.sent;if(response.ok){_context.next=7;break;}message=\"An error occurred: \".concat(response.statusText);window.alert(message);return _context.abrupt(\"return\");case 7:_context.next=9;return response.json();case 9:records=_context.sent;setRecords(records);case 11:case\"end\":return _context.stop();}}},_callee);}));return _getRecords.apply(this,arguments);}getRecords();return;},[records.length]);// This method will delete a record\nfunction _deleteRecord2(_x){return _deleteRecord.apply(this,arguments);}// This method will map out the records on the table\nfunction _deleteRecord(){_deleteRecord=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var newRecords;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/\".concat(id),{method:\"DELETE\"});case 2:newRecords=records.filter(function(el){return el._id!==id;});setRecords(newRecords);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteRecord.apply(this,arguments);}function recordList(){return records.map(function(record){return/*#__PURE__*/_jsx(Record,{record:record,deleteRecord:function deleteRecord(){return _deleteRecord2(record._id);}},record._id);});}// This following section will display the table with the records of individuals.\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Record List\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",style:{marginTop:20},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Relationship\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:recordList()})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Link","Record","props","record","firstName","lastName","relationship","_id","deleteRecord","RecordList","records","setRecords","getRecords","fetch","response","ok","message","statusText","window","alert","json","length","id","method","newRecords","filter","el","recordList","map","marginTop"],"sources":["C:/Users/lilju/Desktop/Personal-Website/frontend/src/components/records-panel.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n \r\nconst Record = (props) => (\r\n <tr>\r\n   <td>{props.record.firstName}</td>\r\n   <td>{props.record.lastName}</td>\r\n   <td>{props.record.relationship}</td>\r\n   <td>\r\n     <Link className=\"btn btn-link\" to={`/edit-profile/${props.record._id}`}>Edit</Link> |\r\n     <button className=\"btn btn-link\"\r\n       onClick={() => {\r\n         props.deleteRecord(props.record._id);\r\n       }}\r\n     >\r\n       Delete\r\n     </button>\r\n   </td>\r\n </tr>\r\n);\r\n \r\nexport default function RecordList() {\r\n const [records, setRecords] = useState([]);\r\n \r\n // This method fetches the records from the database.\r\n useEffect(() => {\r\n   async function getRecords() {\r\n     const response = await fetch(`http://localhost:5000/records-panel`);\r\n \r\n     if (!response.ok) {\r\n       const message = `An error occurred: ${response.statusText}`;\r\n       window.alert(message);\r\n       return;\r\n     }\r\n \r\n     const records = await response.json();\r\n     setRecords(records);\r\n   }\r\n \r\n   getRecords();\r\n \r\n   return;\r\n }, [records.length]);\r\n \r\n // This method will delete a record\r\n async function deleteRecord(id) {\r\n   await fetch(`http://localhost:5000/${id}`, {\r\n     method: \"DELETE\"\r\n   });\r\n \r\n   const newRecords = records.filter((el) => el._id !== id);\r\n   setRecords(newRecords);\r\n }\r\n \r\n // This method will map out the records on the table\r\n function recordList() {\r\n   return records.map((record) => {\r\n     return (\r\n       <Record\r\n         record={record}\r\n         deleteRecord={() => deleteRecord(record._id)}\r\n         key={record._id}\r\n       />\r\n     );\r\n   });\r\n }\r\n \r\n // This following section will display the table with the records of individuals.\r\n return (\r\n   <div>\r\n     <h3>Record List</h3>\r\n     <table className=\"table table-striped\" style={{ marginTop: 20 }}>\r\n       <thead>\r\n         <tr>\r\n           <th>First Name</th>\r\n           <th>Last Name</th>\r\n           <th>Relationship</th>\r\n           <th>Action</th>\r\n         </tr>\r\n       </thead>\r\n       <tbody>{recordList()}</tbody>\r\n     </table>\r\n   </div>\r\n );\r\n}"],"mappings":"kaAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CAAC,wFAExC,GAAMC,OAAM,CAAG,QAATA,OAAM,CAAIC,KAAK,qBACpB,mCACE,oBAAKA,KAAK,CAACC,MAAM,CAACC,SAAS,EAAM,cACjC,oBAAKF,KAAK,CAACC,MAAM,CAACE,QAAQ,EAAM,cAChC,oBAAKH,KAAK,CAACC,MAAM,CAACG,YAAY,EAAM,cACpC,mCACE,KAAC,IAAI,EAAC,SAAS,CAAC,cAAc,CAAC,EAAE,yBAAmBJ,KAAK,CAACC,MAAM,CAACI,GAAG,CAAG,kBAAY,mBACnF,eAAQ,SAAS,CAAC,cAAc,CAC9B,OAAO,CAAE,kBAAM,CACbL,KAAK,CAACM,YAAY,CAACN,KAAK,CAACC,MAAM,CAACI,GAAG,CAAC,CACtC,CAAE,oBAGK,GACN,GACF,EACL,CAED,cAAe,SAASE,WAAU,EAAG,CACpC,cAA8BV,QAAQ,CAAC,EAAE,CAAC,wCAAnCW,OAAO,eAAEC,UAAU,eAE1B;AACAb,SAAS,CAAC,UAAM,SACCc,WAAU,0IAAzB,wLACyBC,MAAK,uCAAuC,QAA7DC,QAAQ,kBAETA,QAAQ,CAACC,EAAE,yBACRC,OAAO,8BAAyBF,QAAQ,CAACG,UAAU,EACzDC,MAAM,CAACC,KAAK,CAACH,OAAO,CAAC,CAAC,8DAIFF,SAAQ,CAACM,IAAI,EAAE,QAA/BV,OAAO,eACbC,UAAU,CAACD,OAAO,CAAC,CAAC,uDACrB,6CAEDE,UAAU,EAAE,CAEZ,OACF,CAAC,CAAE,CAACF,OAAO,CAACW,MAAM,CAAC,CAAC,CAEpB;AAAA,QACeb,eAAY,iDAS3B;AAAA,iGATA,kBAA4Bc,EAAE,8JACtBT,MAAK,iCAA0BS,EAAE,EAAI,CACzCC,MAAM,CAAE,QACV,CAAC,CAAC,QAEIC,UAAU,CAAGd,OAAO,CAACe,MAAM,CAAC,SAACC,EAAE,QAAKA,GAAE,CAACnB,GAAG,GAAKe,EAAE,GAAC,CACxDX,UAAU,CAACa,UAAU,CAAC,CAAC,wDACxB,+CAGD,QAASG,WAAU,EAAG,CACpB,MAAOjB,QAAO,CAACkB,GAAG,CAAC,SAACzB,MAAM,CAAK,CAC7B,mBACE,KAAC,MAAM,EACL,MAAM,CAAEA,MAAO,CACf,YAAY,CAAE,8BAAMK,eAAY,CAACL,MAAM,CAACI,GAAG,CAAC,EAAC,EACxCJ,MAAM,CAACI,GAAG,CACf,CAEN,CAAC,CAAC,CACJ,CAEA;AACA,mBACE,oCACE,mCAAoB,cACpB,eAAO,SAAS,CAAC,qBAAqB,CAAC,KAAK,CAAE,CAAEsB,SAAS,CAAE,EAAG,CAAE,wBAC9D,oCACE,mCACE,kCAAmB,cACnB,iCAAkB,cAClB,oCAAqB,cACrB,8BAAe,GACZ,EACC,cACR,uBAAQF,UAAU,EAAE,EAAS,GACvB,GACJ,CAET"},"metadata":{},"sourceType":"module"}